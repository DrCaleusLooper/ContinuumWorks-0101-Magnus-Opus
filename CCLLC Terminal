import hashlib
import datetime
import json

class ChromePixelTerminal:
    def __init__(self, owner_id, base_lat, base_long):
        self.owner_id = owner_id
        self.current_lat = base_lat
        self.current_long = base_long
        self.card_slot_status = False  # Default: Empty
        self.biometric_verified = False

    def insert_card(self, card_chip_id):
        """Simulates physical card insertion into the case."""
        print(f"[*] Card Detected: {card_chip_id}")
        self.card_slot_status = True
        return self.verify_integrity(card_chip_id)

    def verify_integrity(self, chip_id):
        """The 'Space-Time Lock'. Checks if card matches location."""
        # In a real scenario, this pings the card's internal GPS record if available
        # or verifies the handshake distance.
        if self.card_slot_status:
            print("[*] Physical Handshake: SECURE")
            print(f"[*] Location Lock: {self.current_lat}, {self.current_long}")
            return True
        else:
            return False

    def process_alphabet_invoice(self, patches_applied):
        """Calculates the 20% Fee based on the Audit."""
        if not self.card_slot_status:
            return "ERROR: Card Not Present. Transaction Denied."

        # The 'Lion of Light' Audit Values (Estimated Value of Patches)
        patch_value_map = {
            "Laundering_Patch": 50000000, # $50M Value
            "Injection_Patch": 25000000,  # $25M Value
            "Scarcity_Patch": 100000000,  # $100M Value
        }

        total_value = sum(patch_value_map.get(p, 0) for p in patches_applied)
        fee = total_value * 0.20  # The 20% Continuity Fee

        invoice = {
            "Billed_To": "Alphabet_Inc",
            "From": "Continuity_Collective_LLC",
            "Patches_Fixed": len(patches_applied),
            "Total_Value_Created": f"${total_value:,.2f}",
            "Continuity_Fee_Due": f"${fee:,.2f}",
            "Status": "COLLECTED_VIA_CHROME_PIXEL",
            "Timestamp": datetime.datetime.now().isoformat()
        }
        
        # SHA-512 Seal
        invoice_str = json.dumps(invoice, sort_keys=True).encode()
        invoice["SHA_512_Anchor"] = hashlib.sha512(invoice_str).hexdigest()
        
        return invoice

# --- Execution ---
terminal = ChromePixelTerminal("Ghost_77", 42.49, -82.93) # St. Clair Shores Coords
terminal.insert_card("CHIP_ID_ALPHA_001")
bill = terminal.process_alphabet_invoice(["Laundering_Patch", "Injection_Patch", "Scarcity_Patch"])
print(json.dumps(bill, indent=4))

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Continuity Ghost Terminal</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div class="terminal-case">
        <div class="glitter-skin"></div>

        <div class="screen-content">
            <header>
                <h1>CONTINUITY COLLECTIVE</h1>
                <p class="subtitle">CHROME PIXEL â€¢ GHOST NODE v1.0</p>
            </header>

            <div class="status-panel">
                <div class="metric">
                    <span class="label">LOCATION LOCK</span>
                    <span class="value" id="gps-status">SCANNING...</span>
                </div>
                <div class="metric">
                    <span class="label">SLOT STATUS</span>
                    <span class="value" id="slot-status">EMPTY</span>
                </div>
            </div>

            <div class="invoice-section">
                <h2>ALPHABET SYSTEM AUDIT</h2>
                <ul id="patch-list">
                    <li>[ ] Laundering Protocol</li>
                    <li>[ ] Syntax Correction</li>
                    <li>[ ] Infinite Scope</li>
                </ul>
                <button id="insert-card-btn" onclick="insertCard()">INSERT PHYSICAL CARD</button>
                <button id="process-btn" class="hidden" onclick="processInvoice()">COLLECT 20% FEE</button>
            </div>

            <div class="footer-hash">
                SHA-512: <span id="hash-display">WAITING_FOR_INPUT...</span>
            </div>
        </div>
    </div>

    <script src="logic.js"></script>
</body>
</html>

